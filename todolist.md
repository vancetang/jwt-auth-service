# JWT Authentication Microservice - Todo List

*   [x] 初始化 Spring Boot 專案 (Maven, Java 21, Spring Boot 3.3.0, Lombok, Spring Web, Spring Security) - (已完成)
*   [x] 產生 spec.md (包含 UML 圖) - (已完成)
*   [x] 產生 todolist.md - (已完成)
*   [x] 設計 JWT Token 結構 (Claims: sub, roles, iat, exp, jti, iss, aud, typ, rt_jti) - (已完成)
*   [x] 實作 JWT 產生器 (含 HMAC 簽章) - (已完成, 在 JwtTokenProvider 中)
*   [x] 實作 JWT 驗證器 (驗證簽章、過期時間、jti 是否失效) - (已完成, 在 JwtTokenProvider 中)
*   [x] 設計 Refresh Token 結構與儲存機制 (此階段可為記憶體) - (已完成, Refresh Token 也是 JWT 格式)
*   [x] 實作 `POST /auth/login` API: - (已完成)
    *   [x] 接收帳號密碼 (初期使用硬編碼或記憶體驗證) - (已完成)
    *   [x] 驗證成功後產生 JWT Token 及 Refresh Token - (已完成)
    *   [x] 回傳 Tokens - (已完成)
*   [x] 實作 `POST /auth/refresh` API: - (已完成)
    *   [x] 接收 Refresh Token - (已完成)
    *   [x] 驗證 Refresh Token (有效性、未過期、typ Claim) - (已完成)
    *   [x] 產生新的 JWT Token - (已完成)
    *   [x] 換發新的 Refresh Token (Refresh Token Rotation) - (已完成)
    *   [x] 回傳新 JWT Token 和新的 Refresh Token - (已完成)
*   [x] 實作 `POST /auth/logout` API: - (已完成)
    *   [x] 接收 JWT Token (Access Token) - (已完成)
    *   [x] 將 Access Token 的 jti 及關聯的 Refresh Token jti 標記為失效 (記憶體實作，連帶失效) - (已完成)
    *   [x] 回傳操作結果 - (已完成)
*   [x] 實作 `GET /user/info` API: - (已完成)
    *   [x] 設計 Spring Security Filter (`JwtAuthenticationFilter`) 以攔截並驗證 JWT - (已完成)
    *   [x] 驗證 JWT Token - (已完成)
    *   [x] 成功後從 Token 中提取使用者資訊 - (已完成)
    *   [x] 回傳使用者資訊 (初期使用固定資訊) - (已完成)
*   [x] 實作基於 jti 的 Token 失效機制 (黑名單) - (已完成)
    *   [x] 實現記憶體黑名單自動清理機制 - (已完成)
    *   [x] 實現 Refresh Token 連帶失效 - (已完成)
*   [x] 確保 Refresh Token 與 Access Token 有不同的過期時間 - (已完成, 透過 JwtConfigProperties 配置)
*   [x] 撰寫函式級註解 - (已完成, 全面檢視和補全)
*   [ ] 撰寫 README.md (專案描述、檔案結構、使用技術、安裝執行方式)
*   [ ] 產生 report.md (彙整所有子任務報告)
*   [ ] Git Commit (遵循 Conventional Commits)
*   [ ] (補充) 更新 spec.md 中的物件關聯圖 (UML)
